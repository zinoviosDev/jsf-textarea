<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
    xml:lang="fr">
    <title>TextArea</title>
    <h:form id="form">
        <h:messages styleClass="error-message" showDetail="true" style="color: red" />
        <h:panelGroup id="modalPanel" styleClass="modal" style="#{!facesContext.validationFailed ? 'display: none' : 'display: block'}">
            <h:inputTextarea id="messageInput" value="#{textareaBean.message}" required="true"
                             style="#{textareaBean.message.length() > 10 ? 'border: 10px solid red;' : ''}"
                             onkeyup="document.getElementById('form:submitButton').disabled = !this.value" />
            <br /><br />
            <h:commandButton id="submitButton"
                             value="Submit"
                             action="#{textareaBean.submit()}"
                             disabled="#{empty textareaBean.message}">
                <f:ajax event="click"
                        execute="@form"
                        render="messageInput"
                        listener="#{textareaBean.submit}" />
            </h:commandButton>
        </h:panelGroup>
        <h:commandButton value="Afficher la fenÃªtre modale" type="button" onclick="document.getElementById('form:modalPanel').style.display = 'block'" />
    </h:form>
</html>
